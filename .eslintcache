[{"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\index.js":"1","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\layout\\Home\\Home.js":"2","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\layout\\FlipCard\\AuthFormContainer\\SignUp.js":"3","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\layout\\FlipCard\\AuthFormContainer\\SignIn.js":"4","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\layout\\FlipCard\\FlipCard.js":"5","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\components\\Chat\\Chat.js":"6","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\Authentication\\services\\auth.service.js":"7","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\components\\Chat\\util.js":"8","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\App.js":"9","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\layout\\MyApplication.js":"10","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\components\\Boards\\BoardUser.js":"11","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\Authentication\\services\\user.service.js":"12","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\components\\Chat\\globalState.js":"13","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\Authentication\\services\\auth-header.js":"14"},{"size":1081,"mtime":1611086231328,"results":"15","hashOfConfig":"16"},{"size":390,"mtime":1610104288535,"results":"17","hashOfConfig":"16"},{"size":5154,"mtime":1611006175911,"results":"18","hashOfConfig":"16"},{"size":3715,"mtime":1611093067285,"results":"19","hashOfConfig":"16"},{"size":945,"mtime":1611093320484,"results":"20","hashOfConfig":"16"},{"size":5019,"mtime":1611071508644,"results":"21","hashOfConfig":"16"},{"size":805,"mtime":1611092275082,"results":"22","hashOfConfig":"16"},{"size":2655,"mtime":1611070666008,"results":"23","hashOfConfig":"16"},{"size":246,"mtime":1611083867703,"results":"24","hashOfConfig":"16"},{"size":945,"mtime":1611093379710,"results":"25","hashOfConfig":"16"},{"size":987,"mtime":1611092568225,"results":"26","hashOfConfig":"16"},{"size":613,"mtime":1610101526454,"results":"27","hashOfConfig":"16"},{"size":458,"mtime":1611069719656,"results":"28","hashOfConfig":"16"},{"size":232,"mtime":1611092460469,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32","usedDeprecatedRules":"33"},"1r7oytd",{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"39"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"44","messages":"45","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"33"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\index.js",["65"],"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { RecoilRoot } from \"recoil\";\nimport recoilPersist from \"recoil-persist\";\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport Home from \"./layout/Home/Home\";\nimport BoardUser from \"./components/Boards/BoardUser\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Link\n} from 'react-router-dom';\n\nconst { RecoilPersist, updateState } = recoilPersist([], {\n  key: \"recoil-persist\",\n  storage: sessionStorage,\n});\n\nReactDOM.render(\n  <RecoilRoot initializeState={updateState}>\n    <RecoilPersist />\n    <Router>\n          <Route exact path=\"/\" component={App} />\n          <Route path=\"/chat\" component={Home} />\n          <Route path=\"/user\" component={BoardUser} />\n    </Router>\n  </RecoilRoot>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n",["66","67"],"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\layout\\Home\\Home.js",[],["68","69"],"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\layout\\FlipCard\\AuthFormContainer\\SignUp.js",[],["70","71"],"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\layout\\FlipCard\\AuthFormContainer\\SignIn.js",[],"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\layout\\FlipCard\\FlipCard.js",["72"],"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\components\\Chat\\Chat.js",["73","74","75","76","77","78"],"import React, { useEffect, useState } from \"react\";\r\nimport { useRecoilValue, useRecoilState } from \"recoil\";\r\nimport { Button, message } from \"antd\";\r\nimport {\r\n    loggedInUser,\r\n    chatActiveContact,\r\n    chatMessages,\r\n} from \"./globalState\";\r\nimport {\r\n    getUsers,\r\n    countNewMessages,\r\n    findChatMessages,\r\n    findChatMessage,\r\n} from \"./util\";\r\nimport AuthService from \"../../Authentication/services/auth.service\";\r\nimport ScrollToBottom from \"react-scroll-to-bottom\";\r\nimport './Chat.css';\r\n\r\nvar stompClient = null;\r\nfunction Chat(props) {\r\n    const currentUser = AuthService.getCurrentUser();\r\n    const [text, setText] = useState(\"\");\r\n    const [contacts, setContacts] = useState([]);\r\n    const [activeContact, setActiveContact] = useRecoilState(chatActiveContact);\r\n    const [messages, setMessages] = useRecoilState(chatMessages);\r\n\r\n    useEffect(() => {\r\n        // if (localStorage.getItem(\"accessToken\") === null) {\r\n        //   props.history.push(\"/login\");\r\n        // }\r\n        connect();\r\n        loadContacts();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (activeContact === undefined) return;\r\n        findChatMessages(activeContact.id, currentUser.id).then((msgs) =>\r\n          setMessages(msgs)\r\n        );\r\n        loadContacts();\r\n      }, [activeContact]);\r\n\r\n    const onConnected = () => {\r\n        console.log(\"connected\");\r\n        console.log(currentUser);\r\n        stompClient.subscribe(\r\n            \"/user/\" + currentUser.id + \"/queue/messages\",\r\n            onMessageReceived\r\n        );\r\n    };\r\n    \r\n    const onError = (err) => {\r\n        console.log(err);\r\n    };\r\n\r\n    const connect = () => {\r\n        const Stomp = require(\"stompjs\");\r\n        var SockJS = require(\"sockjs-client\");\r\n        SockJS = new SockJS(\"http://localhost:8080/ws\");\r\n        stompClient = Stomp.over(SockJS);\r\n        stompClient.connect({}, onConnected, onError);\r\n    };\r\n\r\n    const onMessageReceived = (msg) => {\r\n        const notification = JSON.parse(msg.body);\r\n        const active = JSON.parse(sessionStorage.getItem(\"recoil-persist\"))\r\n          .chatActiveContact;\r\n    \r\n        if (active.id === notification.senderId) {\r\n          findChatMessage(notification.id).then((message) => {\r\n            const newMessages = JSON.parse(sessionStorage.getItem(\"recoil-persist\"))\r\n              .chatMessages;\r\n            newMessages.push(message);\r\n            setMessages(newMessages);\r\n          });\r\n        } else {\r\n          message.info(\"Received a new message from \" + notification.senderName);\r\n        }\r\n        loadContacts();\r\n    };   \r\n\r\n    const sendMessage = (msg) => {\r\n        if (msg.trim() !== \"\") {\r\n          const message = {\r\n            senderId: currentUser.id,\r\n            recipientId: activeContact.id,\r\n            senderName: currentUser.name,\r\n            recipientName: activeContact.name,\r\n            content: msg,\r\n            timestamp: new Date(),\r\n          };\r\n          stompClient.send(\"/app/chat\", {}, JSON.stringify(message));\r\n    \r\n          const newMessages = [...messages];\r\n          newMessages.push(message);\r\n          setMessages(newMessages);\r\n        }\r\n    };\r\n    const loadContacts = () => {\r\n        const promise = getUsers().then((users) =>\r\n          users.map((contact) =>\r\n            countNewMessages(contact.id, currentUser.id).then((count) => {\r\n              contact.newMessages = count;\r\n              return contact;\r\n            })\r\n          )\r\n        );\r\n    \r\n        promise.then((promises) =>\r\n          Promise.all(promises).then((users) => {\r\n            setContacts(users);\r\n            if (activeContact === undefined && users.length > 0) {\r\n              setActiveContact(users[0]);\r\n            }\r\n          })\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"chat-container\">\r\n            <ScrollToBottom className=\"messages\">\r\n                <ul>\r\n                    {messages.map((msg) => (\r\n                        <li class={msg.senderId === currentUser.id ? \"sent\" : \"replies\"}>\r\n                            <p>{msg.content}</p>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </ScrollToBottom>\r\n            <div className=\"message-panel\">\r\n                <input\r\n                    name=\"user_input\"\r\n                    className=\"message\" \r\n                    placeholder=\"Type a message...\" \r\n                    onChange={(event) => setText(event.target.value)}\r\n                    onKeyPress={(event) => {\r\n                      if (event.key === \"Enter\") {\r\n                        sendMessage(text);\r\n                        setText(\"\");\r\n                      }\r\n                    }}\r\n                />\r\n                <button className=\"bSend\" \r\n                    onClick={() => {\r\n                    sendMessage(text);\r\n                    setText(\"\") \r\n                    }}>\r\n                    Send\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chat;","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\Authentication\\services\\auth.service.js",["79"],"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\components\\Chat\\util.js",[],"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\App.js",["80"],"import React from \"react\";\r\nimport './style/App.css';\r\nimport MyApplication from \"./layout/MyApplication\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nfunction App() {\r\n  return (\r\n      <MyApplication />\r\n  );\r\n}\r\n\r\nexport default App;","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\layout\\MyApplication.js",["81","82","83","84","85"],"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\components\\Boards\\BoardUser.js",["86"],"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\Authentication\\services\\user.service.js",["87"],"import axios from \"axios\";\r\nimport authHeader from \"./auth-header\";\r\n\r\nconst API_URL = \"http://localhost:8080/api/test/\";\r\n\r\nconst getPublicContent = () => {\r\n  return axios.get(API_URL + \"all\");\r\n};\r\n\r\nconst getUserBoard = () => {\r\n  return axios.get(API_URL + \"user\", { headers: authHeader() });\r\n};\r\n\r\nconst getModeratorBoard = () => {\r\n  return axios.get(API_URL + \"mod\", { headers: authHeader() });\r\n};\r\n\r\nconst getAdminBoard = () => {\r\n  return axios.get(API_URL + \"admin\", { headers: authHeader() });\r\n};\r\n\r\nexport default {\r\n  getPublicContent,\r\n  getUserBoard,\r\n  getModeratorBoard,\r\n  getAdminBoard,\r\n};","C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\components\\Chat\\globalState.js",[],"C:\\Users\\kamil\\OneDrive\\Pulpit\\Repozytoria\\PROJEKT\\frontend\\src\\Authentication\\services\\auth-header.js",[],{"ruleId":"88","severity":1,"message":"89","line":13,"column":3,"nodeType":"90","messageId":"91","endLine":13,"endColumn":7},{"ruleId":"92","replacedBy":"93"},{"ruleId":"94","replacedBy":"95"},{"ruleId":"92","replacedBy":"96"},{"ruleId":"94","replacedBy":"97"},{"ruleId":"92","replacedBy":"98"},{"ruleId":"94","replacedBy":"99"},{"ruleId":"88","severity":1,"message":"100","line":8,"column":12,"nodeType":"90","messageId":"91","endLine":8,"endColumn":23},{"ruleId":"88","severity":1,"message":"101","line":2,"column":10,"nodeType":"90","messageId":"91","endLine":2,"endColumn":24},{"ruleId":"88","severity":1,"message":"102","line":3,"column":10,"nodeType":"90","messageId":"91","endLine":3,"endColumn":16},{"ruleId":"88","severity":1,"message":"103","line":5,"column":5,"nodeType":"90","messageId":"91","endLine":5,"endColumn":17},{"ruleId":"88","severity":1,"message":"104","line":23,"column":12,"nodeType":"90","messageId":"91","endLine":23,"endColumn":20},{"ruleId":"105","severity":1,"message":"106","line":33,"column":8,"nodeType":"107","endLine":33,"endColumn":10,"suggestions":"108"},{"ruleId":"105","severity":1,"message":"109","line":41,"column":10,"nodeType":"107","endLine":41,"endColumn":25,"suggestions":"110"},{"ruleId":"111","severity":1,"message":"112","line":36,"column":1,"nodeType":"113","endLine":41,"endColumn":3},{"ruleId":"88","severity":1,"message":"114","line":4,"column":10,"nodeType":"90","messageId":"91","endLine":4,"endColumn":23},{"ruleId":"88","severity":1,"message":"115","line":2,"column":10,"nodeType":"90","messageId":"91","endLine":2,"endColumn":16},{"ruleId":"88","severity":1,"message":"116","line":2,"column":18,"nodeType":"90","messageId":"91","endLine":2,"endColumn":23},{"ruleId":"88","severity":1,"message":"117","line":2,"column":25,"nodeType":"90","messageId":"91","endLine":2,"endColumn":33},{"ruleId":"88","severity":1,"message":"118","line":9,"column":12,"nodeType":"90","messageId":"91","endLine":9,"endColumn":30},{"ruleId":"88","severity":1,"message":"119","line":10,"column":12,"nodeType":"90","messageId":"91","endLine":10,"endColumn":26},{"ruleId":"105","severity":1,"message":"120","line":28,"column":6,"nodeType":"107","endLine":28,"endColumn":8,"suggestions":"121"},{"ruleId":"111","severity":1,"message":"112","line":22,"column":1,"nodeType":"113","endLine":27,"endColumn":3},"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","no-native-reassign",["122"],"no-negated-in-lhs",["123"],["122"],["123"],["122"],["123"],"'currentUser' is assigned a value but never used.","'useRecoilValue' is defined but never used.","'Button' is defined but never used.","'loggedInUser' is defined but never used.","'contacts' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'connect' and 'loadContacts'. Either include them or remove the dependency array.","ArrayExpression",["124"],"React Hook useEffect has missing dependencies: 'currentUser.id', 'loadContacts', and 'setMessages'. Either include them or remove the dependency array.",["125"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","'BrowserRouter' is defined but never used.","'Switch' is defined but never used.","'Route' is defined but never used.","'Redirect' is defined but never used.","'showModeratorBoard' is assigned a value but never used.","'showAdminBoard' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'currentUser.username'. Either include it or remove the dependency array.",["126"],"no-global-assign","no-unsafe-negation",{"desc":"127","fix":"128"},{"desc":"129","fix":"130"},{"desc":"131","fix":"132"},"Update the dependencies array to be: [connect, loadContacts]",{"range":"133","text":"134"},"Update the dependencies array to be: [activeContact, currentUser.id, loadContacts, setMessages]",{"range":"135","text":"136"},"Update the dependencies array to be: [currentUser.username]",{"range":"137","text":"138"},[1055,1057],"[connect, loadContacts]",[1286,1301],"[activeContact, currentUser.id, loadContacts, setMessages]",[802,804],"[currentUser.username]"]